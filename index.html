<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
	<!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'"> -->
    <!-- <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'"> -->
	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>


    <title>이미지캡처</title>
  </head>
  <body>
  
	<div id="example" style="width: 500px;">
        안녕하세요 이미지 캡쳐 예제입니다.<br />
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4nsgRjLZntKqK6j0kKjHsYJtQQGsLo27TeDJhy3p85qp9m9WB">
        <!-- 구글 상업정 수정 이미지 검색 활용 -->
        <!-- 외부 링크는 Access-Control-Allow-Origin 가 해당 서버에서 허용이 되지 않으면 캡쳐 대상제외 -->
    </div>
    <script type="text/javascript">
    function sample() {
        
        var background = document.getElementById('example').style.background;
        if(background == "") {
            document.getElementById('example').style.background = "#fff"; 
        }
            
        html2canvas(document.getElementById('example'), {
            useCORS: true, // 다른사이트의리소스가있을때활성화(그러나...Access-Control-Allow-Origin 필요)
            onrendered: function(canvas) {
				alert("나여기있음");
                canvas.toBlob(function(blob) {
                    saveAs(blob, 'download.png');
                });
                
                // $("#test").html('<img src=' + canvas.toDataURL("image/png") + '>');
            }
        });
    }
    </script>
    <div id="test"></div>
    <button onclick='sample();'>캡처</button>

	
	
	
    <!-- You can also require other files to run in this process -->
    <script src="./renderer.js"></script>
  </body>
</html>
